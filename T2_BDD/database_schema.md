# Database Schema Proposal (T2_BDD)

Based on the analysis of `T1_analyse_de_donnees` (Music) and `T1_alternants` (Users), here is the proposed normalized PostgreSQL schema.

## 1. Music Domain

### Tables

#### `account`
- `account_id` (UUID, PK)
- `login` (VARCHAR)
- `password` (VARCHAR)
- `name` (VARCHAR)
- `email` (VARCHAR)
- `created_at` (TIMESTAMP)

#### `artist`
- `artist_id` (UUID, PK, FK -> account.account_id)
- `artist_bio` (TEXT)
- `artist_location` (VARCHAR)
- `artist_latitude` (FLOAT)
- `artist_longitude` (FLOAT)
- `artist_active_year_begin` (INT)
- `artist_active_year_end` (INT)
- `artist_favorites` (INT)
- `artist_comments` (INT)

#### `album`
- `album_id` (UUID, PK)
- `album_title` (VARCHAR)
- `album_type` (VARCHAR)
- `album_tracks_count` (INT)
- `album_date_released` (DATE)
- `album_listens` (INT)
- `album_favorites` (INT)
- `album_comments` (INT)
- `album_producer` (VARCHAR)

#### `genre`
- `genre_id` (UUID, PK)
- `parent_id` (UUID, FK -> genre.genre_id)
- `title` (VARCHAR)
- `top_level` (INT)

#### `track`
- `track_id` (UUID, PK)
- `album_id` (UUID, FK -> album.album_id)
- `track_title` (VARCHAR)
- `track_duration` (INT)
- `track_number` (INT)
- `track_disc_number` (INT)
- `track_explicit` (BOOLEAN)
- `track_instrumental` (BOOLEAN)
- `track_listens` (INT)
- `track_favorites` (INT)
- `track_interest` (FLOAT)
- `track_comments` (INT)
- `track_date_created` (DATE)
- `track_composer` (VARCHAR)
- `track_lyricist` (VARCHAR)
- `track_publisher` (VARCHAR)

#### `audio_feature`
- `track_id` (UUID, PK, FK -> Tracks.track_id)
- `acousticness` (FLOAT)
- `danceability` (FLOAT)
- `energy` (FLOAT)
- `instrumentalness` (FLOAT)
- `liveness` (FLOAT)
- `speechiness` (FLOAT)
- `tempo` (FLOAT)
- `valence` (FLOAT)

#### `temporal_feature`
- `track_id` (UUID, PK, FK -> Tracks.track_id)
- `chroma_stft_skew.1` (FLOAT)
- `chroma_stft_skew.2` (FLOAT)
- `chroma_stft_skew.3` (FLOAT)
- `chroma_stft_skew.4` (FLOAT)
- `chroma_stft_skew.5` (FLOAT)
- `chroma_stft_skew.6` (FLOAT)
- `chroma_stft_skew.7` (FLOAT)
- `chroma_stft_skew.8` (FLOAT)
- `chroma_stft_skew.9` (FLOAT)
- `chroma_stft_skew.10` (FLOAT)
- `chroma_stft_skew.11` (FLOAT)
- `chroma_stft_std` (FLOAT)
- `chroma_stft_std.1` (FLOAT)
- `chroma_stft_std.2` (FLOAT)
- `chroma_stft_std.3` (FLOAT)
- `chroma_stft_std.4` (FLOAT)
- `chroma_stft_std.5` (FLOAT)
- `chroma_stft_std.6` (FLOAT)
- `chroma_stft_std.7` (FLOAT)
- `chroma_stft_std.8` (FLOAT)
- `chroma_stft_std.9` (FLOAT)
- `chroma_stft_std.10` (FLOAT)
- `chroma_stft_std.11` (FLOAT)
- `mfcc_kurtosis` (FLOAT)
- `mfcc_kurtosis.1` (FLOAT)
- `mfcc_kurtosis.2` (FLOAT)
- `mfcc_kurtosis.3` (FLOAT)
- `mfcc_kurtosis.4` (FLOAT)
- `mfcc_kurtosis.5` (FLOAT)
- `mfcc_kurtosis.6` (FLOAT)
- `mfcc_kurtosis.7` (FLOAT)
- `mfcc_kurtosis.8` (FLOAT)
- `mfcc_kurtosis.9` (FLOAT)
- `mfcc_kurtosis.10` (FLOAT)
- `mfcc_kurtosis.11` (FLOAT)
- `mfcc_kurtosis.12` (FLOAT)
- `mfcc_kurtosis.13` (FLOAT)
- `mfcc_kurtosis.14` (FLOAT)
- `mfcc_kurtosis.15` (FLOAT)
- `mfcc_kurtosis.16` (FLOAT)
- `mfcc_kurtosis.17` (FLOAT)
- `mfcc_kurtosis.18` (FLOAT)
- `mfcc_kurtosis.19` (FLOAT)
- `mfcc_max` (FLOAT)
- `mfcc_max.1` (FLOAT)
- `mfcc_max.2` (FLOAT)
- `mfcc_max.3` (FLOAT)
- `mfcc_max.4` (FLOAT)
- `mfcc_max.5` (FLOAT)
- `mfcc_max.6` (FLOAT)
- `mfcc_max.7` (FLOAT)
- `mfcc_max.8` (FLOAT)
- `mfcc_max.9` (FLOAT)
- `mfcc_max.10` (FLOAT)
- `mfcc_max.11` (FLOAT)
- `mfcc_max.12` (FLOAT)
- `mfcc_max.13` (FLOAT)
- `mfcc_max.14` (FLOAT)
- `mfcc_max.15` (FLOAT)
- `mfcc_max.16` (FLOAT)
- `mfcc_max.17` (FLOAT)
- `mfcc_max.18` (FLOAT)
- `mfcc_max.19` (FLOAT)
- `mfcc_mean` (FLOAT)
- `mfcc_mean.1` (FLOAT)
- `mfcc_mean.2` (FLOAT)
- `mfcc_mean.3` (FLOAT)
- `mfcc_mean.4` (FLOAT)
- `mfcc_mean.5` (FLOAT)
- `mfcc_mean.6` (FLOAT)
- `mfcc_mean.7` (FLOAT)
- `mfcc_mean.8` (FLOAT)
- `mfcc_mean.9` (FLOAT)
- `mfcc_mean.10` (FLOAT)
- `mfcc_mean.11` (FLOAT)
- `mfcc_mean.12` (FLOAT)
- `mfcc_mean.13` (FLOAT)
- `mfcc_mean.14` (FLOAT)
- `mfcc_mean.15` (FLOAT)
- `mfcc_mean.16` (FLOAT)
- `mfcc_mean.17` (FLOAT)
- `mfcc_mean.18` (FLOAT)
- `mfcc_mean.19` (FLOAT)
- `mfcc_median` (FLOAT)
- `mfcc_median.1` (FLOAT)
- `mfcc_median.2` (FLOAT)
- `mfcc_median.3` (FLOAT)
- `mfcc_median.4` (FLOAT)
- `mfcc_median.5` (FLOAT)
- `mfcc_median.6` (FLOAT)
- `mfcc_median.7` (FLOAT)
- `mfcc_median.8` (FLOAT)
- `mfcc_median.9` (FLOAT)
- `mfcc_median.10` (FLOAT)
- `mfcc_median.11` (FLOAT)
- `mfcc_median.12` (FLOAT)
- `mfcc_median.13` (FLOAT)
- `mfcc_median.14` (FLOAT)
- `mfcc_median.15` (FLOAT)
- `mfcc_median.16` (FLOAT)
- `mfcc_median.17` (FLOAT)
- `mfcc_median.18` (FLOAT)
- `mfcc_median.19` (FLOAT)
- `mfcc_min` (FLOAT)
- `mfcc_min.1` (FLOAT)
- `mfcc_min.2` (FLOAT)
- `mfcc_min.3` (FLOAT)
- `mfcc_min.4` (FLOAT)
- `mfcc_min.5` (FLOAT)
- `mfcc_min.6` (FLOAT)
- `mfcc_min.7` (FLOAT)
- `mfcc_min.8` (FLOAT)
- `mfcc_min.9` (FLOAT)
- `mfcc_min.10` (FLOAT)
- `mfcc_min.11` (FLOAT)
- `mfcc_min.12` (FLOAT)
- `mfcc_min.13` (FLOAT)
- `mfcc_min.14` (FLOAT)
- `mfcc_min.15` (FLOAT)
- `mfcc_min.16` (FLOAT)
- `mfcc_min.17` (FLOAT)
- `mfcc_min.18` (FLOAT)
- `mfcc_min.19` (FLOAT)
- `mfcc_skew` (FLOAT)
- `mfcc_skew.1` (FLOAT)
- `mfcc_skew.2` (FLOAT)
- `mfcc_skew.3` (FLOAT)
- `mfcc_skew.4` (FLOAT)
- `mfcc_skew.5` (FLOAT)
- `mfcc_skew.6` (FLOAT)
- `mfcc_skew.7` (FLOAT)
- `mfcc_skew.8` (FLOAT)
- `mfcc_skew.9` (FLOAT)
- `mfcc_skew.10` (FLOAT)
- `mfcc_skew.11` (FLOAT)
- `mfcc_skew.12` (FLOAT)
- `mfcc_skew.13` (FLOAT)
- `mfcc_skew.14` (FLOAT)
- `mfcc_skew.15` (FLOAT)
- `mfcc_skew.16` (FLOAT)
- `mfcc_skew.17` (FLOAT)
- `mfcc_skew.18` (FLOAT)
- `mfcc_skew.19` (FLOAT)
- `mfcc_std` (FLOAT)
- `mfcc_std.1` (FLOAT)
- `mfcc_std.2` (FLOAT)
- `mfcc_std.3` (FLOAT)
- `mfcc_std.4` (FLOAT)
- `mfcc_std.5` (FLOAT)
- `mfcc_std.6` (FLOAT)
- `mfcc_std.7` (FLOAT)
- `mfcc_std.8` (FLOAT)
- `mfcc_std.9` (FLOAT)
- `mfcc_std.10` (FLOAT)
- `mfcc_std.11` (FLOAT)
- `mfcc_std.12` (FLOAT)
- `mfcc_std.13` (FLOAT)
- `mfcc_std.14` (FLOAT)
- `mfcc_std.15` (FLOAT)
- `mfcc_std.16` (FLOAT)
- `mfcc_std.17` (FLOAT)
- `mfcc_std.18` (FLOAT)
- `mfcc_std.19` (FLOAT)
- `rmse_kurtosis` (FLOAT)
- `rmse_max` (FLOAT)
- `rmse_mean` (FLOAT)
- `rmse_median` (FLOAT)
- `rmse_min` (FLOAT)
- `rmse_skew` (FLOAT)
- `rmse_std` (FLOAT)
- `spectral_bandwidth_kurtosis` (FLOAT)
- `spectral_bandwidth_max` (FLOAT)
- `spectral_bandwidth_mean` (FLOAT)
- `spectral_bandwidth_median` (FLOAT)
- `spectral_bandwidth_min` (FLOAT)
- `spectral_bandwidth_skew` (FLOAT)
- `spectral_bandwidth_std` (FLOAT)
- `spectral_centroid_kurtosis` (FLOAT)
- `spectral_centroid_max` (FLOAT)
- `spectral_centroid_mean` (FLOAT)
- `spectral_centroid_median` (FLOAT)
- `spectral_centroid_min` (FLOAT)
- `spectral_centroid_skew` (FLOAT)
- `spectral_centroid_std` (FLOAT)
- `spectral_contrast_kurtosis` (FLOAT)
- `spectral_contrast_kurtosis.1` (FLOAT)
- `spectral_contrast_kurtosis.2` (FLOAT)
- `spectral_contrast_kurtosis.3` (FLOAT)
- `spectral_contrast_kurtosis.4` (FLOAT)
- `spectral_contrast_kurtosis.5` (FLOAT)
- `spectral_contrast_kurtosis.6` (FLOAT)
- `spectral_contrast_max` (FLOAT)
- `spectral_contrast_max.1` (FLOAT)
- `spectral_contrast_max.2` (FLOAT)
- `spectral_contrast_max.3` (FLOAT)
- `spectral_contrast_max.4` (FLOAT)
- `spectral_contrast_max.5` (FLOAT)
- `spectral_contrast_max.6` (FLOAT)
- `spectral_contrast_mean` (FLOAT)
- `spectral_contrast_mean.1` (FLOAT)
- `spectral_contrast_mean.2` (FLOAT)
- `spectral_contrast_mean.3` (FLOAT)
- `spectral_contrast_mean.4` (FLOAT)
- `spectral_contrast_mean.5` (FLOAT)
- `spectral_contrast_mean.6` (FLOAT)
- `spectral_contrast_median` (FLOAT)
- `spectral_contrast_median.1` (FLOAT)
- `spectral_contrast_median.2` (FLOAT)
- `spectral_contrast_median.3` (FLOAT)
- `spectral_contrast_median.4` (FLOAT)
- `spectral_contrast_median.5` (FLOAT)
- `spectral_contrast_median.6` (FLOAT)
- `spectral_contrast_min` (FLOAT)
- `spectral_contrast_min.1` (FLOAT)
- `spectral_contrast_min.2` (FLOAT)
- `spectral_contrast_min.3` (FLOAT)
- `spectral_contrast_min.4` (FLOAT)
- `spectral_contrast_min.5` (FLOAT)
- `spectral_contrast_min.6` (FLOAT)
- `spectral_contrast_skew` (FLOAT)
- `spectral_contrast_skew.1` (FLOAT)
- `spectral_contrast_skew.2` (FLOAT)
- `spectral_contrast_skew.3` (FLOAT)
- `spectral_contrast_skew.4` (FLOAT)
- `spectral_contrast_skew.5` (FLOAT)
- `spectral_contrast_skew.6` (FLOAT)
- `spectral_contrast_std` (FLOAT)
- `spectral_contrast_std.1` (FLOAT)
- `spectral_contrast_std.2` (FLOAT)
- `spectral_contrast_std.3` (FLOAT)
- `spectral_contrast_std.4` (FLOAT)
- `spectral_contrast_std.5` (FLOAT)
- `spectral_contrast_std.6` (FLOAT)
- `spectral_rolloff_kurtosis` (FLOAT)
- `spectral_rolloff_max` (FLOAT)
- `spectral_rolloff_mean` (FLOAT)
- `spectral_rolloff_median` (FLOAT)
- `spectral_rolloff_min` (FLOAT)
- `spectral_rolloff_skew` (FLOAT)
- `spectral_rolloff_std` (FLOAT)
- `tonnetz_kurtosis` (FLOAT)
- `tonnetz_kurtosis.1` (FLOAT)
- `tonnetz_kurtosis.2` (FLOAT)
- `tonnetz_kurtosis.3` (FLOAT)
- `tonnetz_kurtosis.4` (FLOAT)
- `tonnetz_kurtosis.5` (FLOAT)
- `tonnetz_max` (FLOAT)
- `tonnetz_max.1` (FLOAT)
- `tonnetz_max.2` (FLOAT)
- `tonnetz_max.3` (FLOAT)
- `tonnetz_max.4` (FLOAT)
- `tonnetz_max.5` (FLOAT)
- `tonnetz_mean` (FLOAT)
- `tonnetz_mean.1` (FLOAT)
- `tonnetz_mean.2` (FLOAT)
- `tonnetz_mean.3` (FLOAT)
- `tonnetz_mean.4` (FLOAT)
- `tonnetz_mean.5` (FLOAT)
- `tonnetz_median` (FLOAT)
- `tonnetz_median.1` (FLOAT)
- `tonnetz_median.2` (FLOAT)
- `tonnetz_median.3` (FLOAT)
- `tonnetz_median.4` (FLOAT)
- `tonnetz_median.5` (FLOAT)
- `tonnetz_min` (FLOAT)
- `tonnetz_min.1` (FLOAT)
- `tonnetz_min.2` (FLOAT)
- `tonnetz_min.3` (FLOAT)
- `tonnetz_min.4` (FLOAT)
- `tonnetz_min.5` (FLOAT)
- `tonnetz_skew` (FLOAT)
- `tonnetz_skew.1` (FLOAT)
- `tonnetz_skew.2` (FLOAT)
- `tonnetz_skew.3` (FLOAT)
- `tonnetz_skew.4` (FLOAT)
- `tonnetz_skew.5` (FLOAT)
- `tonnetz_std` (FLOAT)
- `tonnetz_std.1` (FLOAT)
- `tonnetz_std.2` (FLOAT)
- `tonnetz_std.3` (FLOAT)
- `tonnetz_std.4` (FLOAT)
- `tonnetz_std.5` (FLOAT)
- `zcr_kurtosis` (FLOAT)
- `zcr_max` (FLOAT)
- `zcr_mean` (FLOAT)
- `zcr_median` (FLOAT)
- `zcr_min` (FLOAT)
- `zcr_skew` (FLOAT)
- `zcr_std` (FLOAT)

#### `tag`
- `tag_id` (UUID, PK)
- `tag_name`(VARCHAR)

#### `playlist`
- `playlist_id` (UUID, PK)
- `playlist_name` (VARCHAR)

#### `rank_track`
- `track_id` (UUID, PK, FK -> track.track_id)
- `rank_song_currency` (INT)
- `rank_song_hotttnesss` (INT)

#### `rank_artist`
- `artist_id` (UUID, PK, FK -> artist.artist_id)
- `rank_artist_discovery` (INT)
- `rank_artist_familiarity` (INT)
- `rank_artist_hotttnesss` (INT)

#### `license`
- `license_id` (UUID, PK)
- `license_title` (VARCHAR)
- `license_url` (VARCHAR)


### Junction Tables (Normalization)

#### `track_genre`
- `track_id` (UUID, PK, FK -> Tracks.track_id)
- `genre_id` (UUID, PK, FK -> Genres.genre_id)

#### `track_tag`
- `track_id` (UUID, PK, FK -> track.track_id)
- `tag_id` (UUID, PK, FK -> tag.track_id)

#### `artist_tag`
- `artist_id` (UUID,PK, FK -> Artists.artist_id)
- `tag_id` (UUID,PK, FK -> tag.track_id)

#### `album_artist`
- `album_id` (UUID, PK, FK -> album.album_id)
- `artist_id` (UUID, PK, FK -> artist.artist_id)

#### `track_artist_main`
- `track_id` (UUID, PK, FK -> track.track_id)
- `artist_id` (UUID, PK, FK -> artist.artist_id)

#### `track_artist_feat`
- `track_id` (UUID, PK, FK -> track.track_id)
- `artist_id` (UUID, PK, FK -> artist.artist_id)

#### `track_license`
- `track_id` (UUID, PK, FK -> track.track_id)
- `license_id` (UUID, PK, FK -> license.license_id)

#### `playlist_track`
- `playlist_id` (UUID, PK, FK -> playlist.playlist_id)
- `track_id` (UUID, PK, FK -> track.track_id)

---

## 2. User Domain (Alternants)

### Tables

#### `user`
- `account_id` (UUID, PK, FK -> account.account_id)
- `pseudo` (VARCHAR)

#### `preference`
- `account_id` (UUID, PK, FK -> user.account_id)
- `age_range` (VARCHAR)
- `gender` (VARCHAR)
- `position` (VARCHAR)
- `has_consented` (BOOLEAN)
- `is_listening` (BOOLEAN)
- `frequency` (INT)
- `when_listening` (FLOAT)
- `duration_pref` (INT)
- `energy_pref` (VARCHAR)
- `tempo_pref` (FLOAT)
- `feeling_pref` (VARCHAR)
- `is_live_pref` (VARCHAR)
- `quality_pref` (INT)
- `curiosity_pref` (INT)
- `context` (INT)
- `how` (VARCHAR)
- `platform` (VARCHAR)
- `utility` (VARCHAR)
- `track_genre` (VARCHAR)

### Junction Tables (Normalization)

#### `playlist_user`
- `playlist_id` (UUID, PK, FK -> playlist.playlist_id)
- `account_id` (UUID, PK, FK -> user.account_id)

#### `track_user_like`
- `track_id` (UUID, PK, FK -> track.track_id)
- `account_id` (UUID, PK, FK -> user.account_id)

#### `track_user_listen`
- `track_id` (UUID, PK, FK -> track.track_id)
- `account_id` (UUID, PK, FK -> user.account_id)

